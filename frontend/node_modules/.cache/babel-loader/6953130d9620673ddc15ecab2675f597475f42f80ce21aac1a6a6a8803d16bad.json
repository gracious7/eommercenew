{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/princ/Desktop/ecommerceweb/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _regeneratorRuntime from\"C:/Users/princ/Desktop/ecommerceweb/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/princ/Desktop/ecommerceweb/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";export function addToCart(item){return new Promise(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(resolve){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/cart',{method:'POST',body:JSON.stringify(item),headers:{'content-type':'application/json'}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;resolve({data:data});case 7:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}export function fetchItemsByUserId(){return new Promise(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('/cart');case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;resolve({data:data});case 7:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());}export function updateCart(update){return new Promise(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(resolve){var response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch('/cart/'+update.id,{method:'PATCH',body:JSON.stringify(update),headers:{'content-type':'application/json'}});case 2:response=_context3.sent;_context3.next=5;return response.json();case 5:data=_context3.sent;resolve({data:data});case 7:case\"end\":return _context3.stop();}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}());}export function deleteItemFromCart(itemId){return new Promise(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(resolve){var response,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch('/cart/'+itemId,{method:'DELETE',headers:{'content-type':'application/json'}});case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:data=_context4.sent;resolve({data:{id:itemId}});case 7:case\"end\":return _context4.stop();}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}());}export function resetCart(){// get all items of user's cart - and then delete each\nreturn new Promise(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(resolve){var response,items,_iterator,_step,item;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetchItemsByUserId();case 2:response=_context5.sent;items=response.data;_iterator=_createForOfIteratorHelper(items);_context5.prev=5;_iterator.s();case 7:if((_step=_iterator.n()).done){_context5.next=13;break;}item=_step.value;_context5.next=11;return deleteItemFromCart(item.id);case 11:_context5.next=7;break;case 13:_context5.next=18;break;case 15:_context5.prev=15;_context5.t0=_context5[\"catch\"](5);_iterator.e(_context5.t0);case 18:_context5.prev=18;_iterator.f();return _context5.finish(18);case 21:resolve({status:'success'});case 22:case\"end\":return _context5.stop();}},_callee5,null,[[5,15,18,21]]);}));return function(_x5){return _ref5.apply(this,arguments);};}());}","map":{"version":3,"names":["addToCart","item","Promise","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resolve","response","data","wrap","_callee$","_context","prev","next","fetch","method","body","JSON","stringify","headers","sent","json","stop","_x","apply","arguments","fetchItemsByUserId","_ref2","_callee2","_callee2$","_context2","_x2","updateCart","update","_ref3","_callee3","_callee3$","_context3","id","_x3","deleteItemFromCart","itemId","_ref4","_callee4","_callee4$","_context4","_x4","resetCart","_ref5","_callee5","items","_iterator","_step","_callee5$","_context5","_createForOfIteratorHelper","s","n","done","value","t0","e","f","finish","status","_x5"],"sources":["C:/Users/princ/Desktop/ecommerceweb/frontend/src/features/cart/cartAPI.js"],"sourcesContent":["export function addToCart(item) {\r\n  return new Promise(async (resolve) => {\r\n    const response = await fetch('/cart', {\r\n      method: 'POST',\r\n      body: JSON.stringify(item),\r\n      headers: { 'content-type': 'application/json' },\r\n    });\r\n    const data = await response.json();\r\n    resolve({ data });\r\n  });\r\n}\r\n\r\nexport function fetchItemsByUserId() {\r\n  return new Promise(async (resolve) => {\r\n    const response = await fetch('/cart');\r\n    const data = await response.json();\r\n    resolve({ data });\r\n  });\r\n}\r\n\r\nexport function updateCart(update) {\r\n  return new Promise(async (resolve) => {\r\n    const response = await fetch('/cart/' + update.id, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(update),\r\n      headers: { 'content-type': 'application/json' },\r\n    });\r\n    const data = await response.json();\r\n    resolve({ data });\r\n  });\r\n}\r\n\r\nexport function deleteItemFromCart(itemId) {\r\n  return new Promise(async (resolve) => {\r\n    const response = await fetch('/cart/' + itemId, {\r\n      method: 'DELETE',\r\n      headers: { 'content-type': 'application/json' },\r\n    });\r\n    const data = await response.json();\r\n    resolve({ data: { id: itemId } });\r\n  });\r\n}\r\n\r\nexport function resetCart() {\r\n  // get all items of user's cart - and then delete each\r\n  return new Promise(async (resolve) => {\r\n    const response = await fetchItemsByUserId();\r\n    const items = response.data;\r\n    for (let item of items) {\r\n      await deleteItemFromCart(item.id);\r\n    }\r\n    resolve({ status: 'success' });\r\n  });\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}